{
  "version": 3,
  "sources": ["../../../../sim/cobblemon/registries.ts"],
  "sourcesContent": ["/**\r\n * This exists mainly as a way to avoid boilerplate for data handlers between Showdown and Cobblemon and so we can extend in the future if needed.\r\n * Be sure to check cobblemon.ts for the related data if you add/remove any registries.\r\n */\r\n\r\nimport {Ability} from \"../dex-abilities\";\r\nimport {BagItem} from \"./bag-item\";\r\nimport {DataMove, Move} from \"../dex-moves\";\r\nimport {Item} from \"../dex-items\";\r\nimport {Species} from \"../dex-species\";\r\nimport {Dex} from \"../dex\";\r\nimport {Cobblemon} from \"./cobblemon\";\r\n\r\nexport abstract class CobbleRegistry<T> {\r\n\tcontents: Map<ID, T> = new Map<ID, T>();\r\n\tall(): readonly T[] { return Array.from(this.contents.values()); }\r\n\tget(id: ID): T | undefined { return this.contents.get(id); }\r\n\thas(id: ID): boolean { return this.contents.has(id); }\r\n\treset() { this.contents.clear(); this.invalidate(); }\r\n\r\n\t/**\r\n\t * The main function used to handle incoming data and prepare it for registration.\r\n\t * @param data The raw data to be coaxed into T inside the function.\r\n\t * @param _id Optional manual ID in case the data doesn't have one. Underscored because 'id' is often what we need to set.\r\n\t */\r\n\tabstract register(data: AnyObject, _id?: ID): T;\r\n\r\n\t/**\r\n\t * Nullifies/mark dirty any additional caches etc. while keeping any Cobblemon-registered data intact.\r\n\t * This allows entries to be registered in multiple commands without erasing existing entries. This is automatically run by the reset command as well.\r\n\t * Mainly for use with Dex-related \"allCache\" stores. If the registry doesn't have any Showdown-side data to reset (e.g. bag items) then simply return.\r\n\t */\r\n\tabstract invalidate(): void;\r\n}\r\n\r\nexport interface Registries {\r\n\tability: AbilityRegistry;\r\n\tbagItem: BagItemRegistry;\r\n\theldItem: HeldItemRegistry;\r\n\tmove: MoveRegistry;\r\n\tspecies: SpeciesRegistry;\r\n}\r\n\r\nexport class AbilityRegistry extends CobbleRegistry<Ability> {\r\n\toverride all() { return Dex.mod(Cobblemon.modId).abilities.all(); }\r\n\tinvalidate() { Dex.mod(Cobblemon.modId).abilities.allCache = null; }\r\n\tregister(data: AnyObject, _id: ID) {\r\n\t\tif (!data.name) data.name = _id;\r\n\t\tconst ability = new Ability(data);\r\n\t\tthis.contents.set(ability.id, ability);\r\n\t\treturn ability;\r\n\t}\r\n}\r\n\r\nexport class BagItemRegistry extends CobbleRegistry<BagItem> {\r\n\tinvalidate() { return; }\r\n\tregister(data: AnyObject, _id: ID) {\r\n\t\tconst script = data as BagItem;  // TODO: make BagItem a BasicEffect and part of Dex data\r\n\t\tthis.contents.set(_id, script);\r\n\t\treturn script;\r\n\t}\r\n}\r\n\r\nexport class HeldItemRegistry extends CobbleRegistry<Item> {\r\n\toverride all() { return Dex.mod(Cobblemon.modId).items.all(); }\r\n\tinvalidate() { Dex.mod(Cobblemon.modId).items.allCache = null; }\r\n\tregister(data: AnyObject, _id: ID) {\r\n\t\tif (!data.name) data.name = _id;\r\n\t\tconst item = new Item(data);\r\n\t\tthis.contents.set(item.id, item);\r\n\t\treturn item;\r\n\t}\r\n}\r\n\r\nexport class MoveRegistry extends CobbleRegistry<Move> {\r\n\toverride all() { return Dex.mod(Cobblemon.modId).moves.all(); }\r\n\tinvalidate() { Dex.mod(Cobblemon.modId).moves.allCache = null; }\r\n\tregister(data: AnyObject, _id: ID) {\r\n\t\tif (!data.name) data.name = _id;\r\n\t\tconst move = new DataMove(data);\r\n\t\tthis.contents.set(move.id, move);\r\n\t\treturn move;\r\n\t}\r\n}\r\n\r\nexport class SpeciesRegistry extends CobbleRegistry<Species> {\r\n\toverride all() { return Dex.mod(Cobblemon.modId).species.all(); }\r\n\tinvalidate() { Dex.mod(Cobblemon.modId).species.allCache = null; }\r\n\tregister(data: AnyObject): Species {\r\n\t\tconst species = new Species(data);\r\n\t\tthis.contents.set(species.id, species);\r\n\t\treturn species;\r\n\t}\r\n}\r\n\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA,2BAAsB;AAEtB,uBAA6B;AAC7B,uBAAmB;AACnB,yBAAsB;AACtB,iBAAkB;AAClB,uBAAwB;AAEjB,MAAe,eAAkB;AAAA,EAAjC;AACN,oBAAuB,oBAAI,IAAW;AAAA;AAAA,EACtC,MAAoB;AAAE,WAAO,MAAM,KAAK,KAAK,SAAS,OAAO,CAAC;AAAA,EAAG;AAAA,EACjE,IAAI,IAAuB;AAAE,WAAO,KAAK,SAAS,IAAI,EAAE;AAAA,EAAG;AAAA,EAC3D,IAAI,IAAiB;AAAE,WAAO,KAAK,SAAS,IAAI,EAAE;AAAA,EAAG;AAAA,EACrD,QAAQ;AAAE,SAAK,SAAS,MAAM;AAAG,SAAK,WAAW;AAAA,EAAG;AAerD;AAUO,MAAM,wBAAwB,eAAwB;AAAA,EACnD,MAAM;AAAE,WAAO,eAAI,IAAI,2BAAU,KAAK,EAAE,UAAU,IAAI;AAAA,EAAG;AAAA,EAClE,aAAa;AAAE,mBAAI,IAAI,2BAAU,KAAK,EAAE,UAAU,WAAW;AAAA,EAAM;AAAA,EACnE,SAAS,MAAiB,KAAS;AAClC,QAAI,CAAC,KAAK;AAAM,WAAK,OAAO;AAC5B,UAAM,UAAU,IAAI,6BAAQ,IAAI;AAChC,SAAK,SAAS,IAAI,QAAQ,IAAI,OAAO;AACrC,WAAO;AAAA,EACR;AACD;AAEO,MAAM,wBAAwB,eAAwB;AAAA,EAC5D,aAAa;AAAE;AAAA,EAAQ;AAAA,EACvB,SAAS,MAAiB,KAAS;AAClC,UAAM,SAAS;AACf,SAAK,SAAS,IAAI,KAAK,MAAM;AAC7B,WAAO;AAAA,EACR;AACD;AAEO,MAAM,yBAAyB,eAAqB;AAAA,EACjD,MAAM;AAAE,WAAO,eAAI,IAAI,2BAAU,KAAK,EAAE,MAAM,IAAI;AAAA,EAAG;AAAA,EAC9D,aAAa;AAAE,mBAAI,IAAI,2BAAU,KAAK,EAAE,MAAM,WAAW;AAAA,EAAM;AAAA,EAC/D,SAAS,MAAiB,KAAS;AAClC,QAAI,CAAC,KAAK;AAAM,WAAK,OAAO;AAC5B,UAAM,OAAO,IAAI,sBAAK,IAAI;AAC1B,SAAK,SAAS,IAAI,KAAK,IAAI,IAAI;AAC/B,WAAO;AAAA,EACR;AACD;AAEO,MAAM,qBAAqB,eAAqB;AAAA,EAC7C,MAAM;AAAE,WAAO,eAAI,IAAI,2BAAU,KAAK,EAAE,MAAM,IAAI;AAAA,EAAG;AAAA,EAC9D,aAAa;AAAE,mBAAI,IAAI,2BAAU,KAAK,EAAE,MAAM,WAAW;AAAA,EAAM;AAAA,EAC/D,SAAS,MAAiB,KAAS;AAClC,QAAI,CAAC,KAAK;AAAM,WAAK,OAAO;AAC5B,UAAM,OAAO,IAAI,0BAAS,IAAI;AAC9B,SAAK,SAAS,IAAI,KAAK,IAAI,IAAI;AAC/B,WAAO;AAAA,EACR;AACD;AAEO,MAAM,wBAAwB,eAAwB;AAAA,EACnD,MAAM;AAAE,WAAO,eAAI,IAAI,2BAAU,KAAK,EAAE,QAAQ,IAAI;AAAA,EAAG;AAAA,EAChE,aAAa;AAAE,mBAAI,IAAI,2BAAU,KAAK,EAAE,QAAQ,WAAW;AAAA,EAAM;AAAA,EACjE,SAAS,MAA0B;AAClC,UAAM,UAAU,IAAI,2BAAQ,IAAI;AAChC,SAAK,SAAS,IAAI,QAAQ,IAAI,OAAO;AACrC,WAAO;AAAA,EACR;AACD;",
  "names": []
}
